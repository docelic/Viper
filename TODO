* IDEAS FOR COMPLETING THE THING:

* Test if server side prompter works after changes

* make cacheOpen understand cache specs

* Let exp search a DN if it's not the current DN (prevent loops). Or
 better yet, ignore the DN spec and pull as if it was current entry

* Make viper server also a recursive dns, so can use it as dns instead
 of 192.168.1.254
* configure local bind9 so it resolves according to dhcp leases

* $this->{start} must be keyed to the $level as well

* For every attr that is defined as containing a DN in schema, support
 expansion of dots (".") to components

* check if proper order of values is preserved even when overlays run

* udpkg -i partman_auto_raid in ubuntu 8.04 early_command

* entryAppend to be able to say when to append - always, if schema allows,
 if schema allows but not looking at single/multi value etc. Then, use
that to apply default dhcpOptions even if one specifies some of them
in the host entry

* tests/ dir and a suite of test queries diff-ed to expected return values
 based on client c1.com

* Support fileVal to find all $1 or regex matching within the file, return
 them as array, then have joiner as usual

* preseed network interface to eth0 always, because interface=auto is crap

* we use orig DN in ... expansion when targetting base entry, and entry DNs when
 looping thru subentries. This isn't quite alright as it'll break when base DN
 s coming from fallback (baseDN will be origDN, then on subentries, DN will 
 be fallbackDN)

* use ViperConfig.pm (server, bind DN, pw, etc.). Actually, let's just come
 to the stage where users are added to the directory and Viper checks
 credentials on bind (just simple password for start)

* allow rewriting of requested search attrs to return

* document for config file, ldif, value spec, when do \\ have to be 
 escaped, when is SPEC a filter and when a regex etc.

* query na host da otkrije keyeve koji postoje zbog defaulta i ukljuci ih u search osnovnog nivoa

* See if we can get rid of $entry->clone()s... Enormous time waster (3x)

* Apt sources to not include local cdrom

* origdn support for run_appender just like for run_overlays?

* optimization-- skip component splitting if none of the components
 matches the overlay that would run

* multiple networks per client?

* 'store' overlay that saves computed value for real into the entry, i.e.
  random pw or IP host number

* doc note how to kill dbus on debconf hang if server cl+ced or exits

* specify pw checking, see krb auth

* see if ->check_state is needed on modify? maybe not really

* If overlay fails, hide that attribute from displaying since data in there
 is most probably incomplete (in some cases its hidden, but do it in 100% of
 cases)

* putting value together after overlay work would break if evaluation result matches
 name of some overlay?

* automatic schema update -> create special suffix which is used just
 to trigger some behavior via specifications in filter or search base.
 One of the commands would refresh schema, and other suffixes would notice
 mtime change on schema file and reload.

* Debug prompter (question missing on question nr. > 1)

* don't tie host extra info to puppetClient, tie to extraInfo, configInfo,
 configData or so

- some trigger, that could run arbitrary things, like ipcalc to conver .255 -> /32 etc.

- See why ->must( $oc) wasn't working in Viper.pm test, and document that if you want
  to entryAppend, the original entry must be of the desired objectclasses

- config for DHCP to not accept unknown clients in the pool, so that if someone makes
a mistake in HW addr of a system, the IP it gets assigned is from a 'known bad' pool,
so that they can easily spot the mistake

* Allow search fallback only if the final component is missing, but the rest is
 there? Currently we don't check for that so what happens is whatever crap you
 search, it responds with ou=hosts, ou=defaults which is the final fallback that
 doesn't depend on input params

- different views of same data thru different suffix, virtual part of suffix
 gets removed on request entry and added on all results coming out. (Requires
 that Viper munges the DN to be would-be DN instead of whatever location on
 the disk is)

- check if modifyCopyOnWrite actually works (the case where whole entry comes
 from fallback, and then someone tries to modify it)

- See if after appending from seeAlsoAttr, that attr should be removed from
 the entry or it can stay in there

- when debconf key changed, trigger reload of service owning the key?

* Change searchFallback so that it's similar to searchSubst/entryAppend, i.e.
  should allow to specify conditions, and then rewrite a person wants. Infact,
  it should allow for generating new search bases placed on stack.
 - rewrite code a bit so that search base in sub search() is an array, then
   search all bases in array and append to the result set. (Reason: be able to
   rewrite search with an entry that returns a collection, i.e.
   cn=dhcp,cli1,...
   cn=dhcp,cli2,...

  How to do it? Well make directive with same behavior as searchSubst, but with
  the intention of adding new bases and corresponding options. Also with option
  to specify whether to add base always, or if no results from orig query.
  Actually that option ca be awk-like like NR>0 or something.

  Actually, in this case not only can this add new base but it can also run
  triggers, for example search in ou=dhcp and some ethernet addr can trigger
  creation of an entry with some IP, and then return that IP as if it was
  there.

* resolve file XXXs

* Make Viper its own package, with slap* version of tools -> vipercat, viperadd etc.

NOTES:
- pass on info about expansion etc. through operational attrs

# List of extra todos:
# - ldap server on every client host, delegate part of the tree to it
#   as a referral, for retrieving system data. I.e. 
#   ldapsearch cn=uptime,cn=hostname,ou=hosts,dc=,dc=
#   and the entry defining file $ /proc/uptime (which is symlink from
#   datadir to real /proc/uptime).
# - Optimize number of accesses to key from LDAP.pm (sub exists())
# - Implement delete in debconf's LDAP.pm?
# - See if krb auth can work
# - add support for setuid() or ticket/token obtain based on binding DN
# - anything to do with referral chasing?
# - cfg file option to enable/disable perm denied msgs on reading etc.
# - automatic creation of host entries when new host tries to read its config
#   (can do, but can it know the host's ethernet addr?)

#
# TODO!!!
# - consolidate Debconf patches
# - operational attrs?
